// import 'dart:async';
@override
void initState() {
  super.initState();
  starttimer();
}

Duration duration = const Duration(minutes: 5); //for now default time
Timer? timer;
int countdowm = 0; //store current countdown
void starttimer() {
  timer = Timer.periodic(
    Duration(seconds: 1),
    (timer) {
      if (duration.inSeconds <= 0) {
        ScaffoldMessenger.of(context).showSnackBar(SnackBar(
          content: Text('Time is Finished'),
          duration: Duration(seconds: 1),
        ));
        saveAllAnswers();
        timer.cancel();
        setState(() {
          countdowm = 0;
        });
      } else {
        //updating the value of countdown with each sec.
        setState(() {
          countdowm = duration.inSeconds;
          duration = duration - const Duration(seconds: 1);
        });
      }
    },
  );
}
// ProfileScreen.dart
import 'package:flutter_bloc/flutter_bloc.dart';

class ProfileScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('User Profile')),
      body: BlocBuilder<UserBloc, UserState>(
        builder: (context, state) {
          return Column(
            children: [
              // Display profile picture
              CircleAvatar(
                backgroundImage: NetworkImage(state.profilePictureUrl),
                radius: 50,
              ),
              SizedBox(height: 20),
              // Display user name
              Text(state.name, style: TextStyle(fontSize: 24)),
              SizedBox(height: 20),
              // Buttons to trigger events
              ElevatedButton(
                onPressed: () {
                  BlocProvider.of<UserBloc>(context)
                      .add(UpdateNameEvent('New Name'));
                },
                child: Text('Update Name'),
              ),
              ElevatedButton(
                onPressed: () {
                  BlocProvider.of<UserBloc>(context)
                      .add(UpdateProfilePictureEvent('new_profile_picture.png'));
                },
                child: Text('Update Profile Picture'),
              ),
            ],
          );
        },
      ),
    );
  }
}
// ProfileScreen.dart
import 'package:flutter_bloc/flutter_bloc.dart';

class ProfileScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('User Profile')),
      body: BlocBuilder<UserBloc, UserState>(
        builder: (context, state) {
          return Column(
            children: [
              // Display profile picture
              CircleAvatar(
                backgroundImage: NetworkImage(state.profilePictureUrl),
                radius: 50,
              ),
              SizedBox(height: 20),
              // Display user name
              Text(state.name, style: TextStyle(fontSize: 24)),
              SizedBox(height: 20),
              // Buttons to trigger events
              ElevatedButton(
                onPressed: () {
                  BlocProvider.of<UserBloc>(context)
                      .add(UpdateNameEvent('New Name'));
                },
                child: Text('Update Name'),
              ),
              ElevatedButton(
                onPressed: () {
                  BlocProvider.of<UserBloc>(context)
                      .add(UpdateProfilePictureEvent('new_profile_picture.png'));
                },
                child: Text('Update Profile Picture'),
              ),
            ],
          );
        },
      ),
    );
  }
}
